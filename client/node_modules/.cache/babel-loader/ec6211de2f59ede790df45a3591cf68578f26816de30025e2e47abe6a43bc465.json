{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{motion,AnimatePresence}from'framer-motion';import{Send,Bot,User,Loader,Globe,Mic,MicOff,RefreshCw,Heart,AlertCircle,CheckCircle}from'lucide-react';import toast from'react-hot-toast';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Chat=()=>{var _languages$find;const[messages,setMessages]=useState([{id:1,type:'bot',content:'Hello! I\\'m your GramCare health assistant. I can help you with health questions, provide disease information, and share prevention tips. How can I assist you today?',timestamp:new Date(),language:'en'}]);const[inputMessage,setInputMessage]=useState('');const[isTyping,setIsTyping]=useState(false);const[isListening,setIsListening]=useState(false);const[currentLanguage,setCurrentLanguage]=useState('en');const[supportedLanguages,setSupportedLanguages]=useState({});const[autoDetectLanguage,setAutoDetectLanguage]=useState(true);const[isLoading,setIsLoading]=useState(false);const messagesEndRef=useRef(null);const inputRef=useRef(null);const quickReplies=[{text:'Dengue symptoms',icon:'ðŸ¦Ÿ'},{text:'Malaria prevention',icon:'ðŸ›¡ï¸'},{text:'Child vaccination',icon:'ðŸ’‰'},{text:'Diarrhea treatment',icon:'ðŸ’Š'},{text:'Nearest health center',icon:'ðŸ¥'},{text:'COVID-19 guidelines',icon:'ðŸ˜·'}];const languages=[{code:'en',name:'English',flag:'ðŸ‡ºðŸ‡¸'},{code:'hi',name:'à¤¹à¤¿à¤‚à¤¦à¥€',flag:'ðŸ‡®ðŸ‡³'},{code:'bn',name:'à¦¬à¦¾à¦‚à¦²à¦¾',flag:'ðŸ‡§ðŸ‡©'},{code:'te',name:'à°¤à±†à°²à±à°—à±',flag:'ðŸ‡®ðŸ‡³'}];useEffect(()=>{scrollToBottom();},[messages]);useEffect(()=>{// Fetch supported languages on component mount\nfetchSupportedLanguages();},[]);const fetchSupportedLanguages=async()=>{try{const response=await fetch('/api/chat/languages');const data=await response.json();if(data.success){setSupportedLanguages(data.languages);}}catch(error){console.error('Error fetching supported languages:',error);}};const scrollToBottom=()=>{var _messagesEndRef$curre;(_messagesEndRef$curre=messagesEndRef.current)===null||_messagesEndRef$curre===void 0?void 0:_messagesEndRef$curre.scrollIntoView({behavior:'smooth'});};const sendMessage=async function(){let messageText=arguments.length>0&&arguments[0]!==undefined?arguments[0]:inputMessage;if(!messageText.trim())return;const userMessage={id:Date.now(),type:'user',content:messageText,timestamp:new Date(),language:currentLanguage};setMessages(prev=>[...prev,userMessage]);const currentMessage=messageText;setInputMessage('');setIsTyping(true);setIsLoading(true);try{// Send message to backend\nconst response=await fetch('/api/chat/message',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({message:currentMessage,language:autoDetectLanguage?'auto':currentLanguage,userId:'demo-user',sessionId:'web-session-'+Date.now()})});const data=await response.json();if(data.success){const botMessage={id:Date.now()+1,type:'bot',content:data.response||'I apologize, but I\\'m having trouble processing your request right now. Please try again.',timestamp:new Date(),language:data.language||currentLanguage,confidence:data.confidence,category:data.category,suggestions:data.suggestions||[]};setMessages(prev=>[...prev,botMessage]);// Update detected language if auto-detect is enabled\nif(autoDetectLanguage&&data.language&&data.language!==currentLanguage){setCurrentLanguage(data.language);}}else{throw new Error(data.error||'Failed to get response');}}catch(error){console.error('Error sending message:',error);const errorMessage={id:Date.now()+1,type:'bot',content:'I\\'m sorry, I\\'m having trouble connecting right now. Please check your internet connection and try again.',timestamp:new Date(),language:currentLanguage,isError:true};setMessages(prev=>[...prev,errorMessage]);toast.error('Connection error. Please try again.');}finally{setIsTyping(false);setIsLoading(false);}};const handleKeyPress=e=>{if(e.key==='Enter'&&!e.shiftKey){e.preventDefault();sendMessage();}};const toggleVoiceInput=()=>{if('webkitSpeechRecognition'in window){const recognition=new window.webkitSpeechRecognition();recognition.continuous=false;recognition.interimResults=false;recognition.lang=currentLanguage==='hi'?'hi-IN':'en-US';if(!isListening){setIsListening(true);recognition.start();toast.success('Listening... Speak now!');recognition.onresult=event=>{const transcript=event.results[0][0].transcript;setInputMessage(transcript);setIsListening(false);};recognition.onerror=()=>{setIsListening(false);toast.error('Voice recognition failed. Please try again.');};recognition.onend=()=>{setIsListening(false);};}else{recognition.stop();setIsListening(false);}}else{toast.error('Voice recognition is not supported in your browser.');}};const handleQuickReply=async suggestion=>{await sendMessage(suggestion);};const detectLanguage=async text=>{try{const response=await fetch('/api/chat/detect-language',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({text})});const data=await response.json();if(data.success){return data.detectedLanguage;}}catch(error){console.error('Language detection error:',error);}return'en';// Default to English\n};const clearChat=()=>{setMessages([{id:1,type:'bot',content:'Chat cleared! How can I help you today?',timestamp:new Date(),language:currentLanguage}]);toast.success('Chat cleared successfully!');};const formatTime=timestamp=>{return new Date(timestamp).toLocaleTimeString('en-US',{hour:'2-digit',minute:'2-digit'});};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen pt-16 bg-gradient-to-br from-blue-50 via-white to-green-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-4xl mx-auto h-screen flex flex-col\",children:[/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:\"bg-white/80 backdrop-blur-md border-b border-gray-200/50 p-4 flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(Heart,{className:\"w-6 h-6 text-white\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-lg font-semibold text-gray-900\",children:\"GramCare Assistant\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:\"Always here to help with your health questions\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center space-x-1\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:autoDetectLanguage,onChange:e=>setAutoDetectLanguage(e.target.checked),className:\"rounded border-gray-300 text-blue-600 focus:ring-blue-500\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:\"Auto-detect\"})]}),/*#__PURE__*/_jsx(\"select\",{value:currentLanguage,onChange:e=>setCurrentLanguage(e.target.value),disabled:autoDetectLanguage,className:\"px-3 py-2 bg-gray-100 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 \".concat(autoDetectLanguage?'opacity-50 cursor-not-allowed':''),children:Object.keys(supportedLanguages).length>0?Object.entries(supportedLanguages).map(_ref=>{let[code,name]=_ref;return/*#__PURE__*/_jsx(\"option\",{value:code,children:name},code);}):languages.map(lang=>/*#__PURE__*/_jsxs(\"option\",{value:lang.code,children:[lang.flag,\" \",lang.name]},lang.code))})]}),/*#__PURE__*/_jsx(motion.button,{whileHover:{scale:1.05},whileTap:{scale:0.95},onClick:clearChat,className:\"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors\",title:\"Clear chat\",children:/*#__PURE__*/_jsx(RefreshCw,{className:\"w-5 h-5\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 overflow-y-auto p-4 space-y-4 custom-scrollbar\",children:[/*#__PURE__*/_jsx(AnimatePresence,{children:messages.map(message=>/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:20,scale:0.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:0.95},transition:{duration:0.3},className:\"flex \".concat(message.type==='user'?'justify-end':'justify-start'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start space-x-3 max-w-xs sm:max-w-md lg:max-w-lg \".concat(message.type==='user'?'flex-row-reverse space-x-reverse':''),children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 \".concat(message.type==='user'?'bg-gradient-to-br from-blue-500 to-purple-600':'bg-gradient-to-br from-green-500 to-teal-600'),children:message.type==='user'?/*#__PURE__*/_jsx(User,{className:\"w-4 h-4 text-white\"}):/*#__PURE__*/_jsx(Bot,{className:\"w-4 h-4 text-white\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative px-4 py-3 rounded-2xl \".concat(message.type==='user'?'chat-bubble-user':message.isError?'bg-red-100 border border-red-200 text-red-800':'chat-bubble-bot'),children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm leading-relaxed whitespace-pre-wrap\",children:message.content}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mt-2 text-xs opacity-70\",children:[/*#__PURE__*/_jsx(\"span\",{children:formatTime(message.timestamp)}),message.confidence&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-1\",children:[message.confidence>0.8?/*#__PURE__*/_jsx(CheckCircle,{className:\"w-3 h-3\"}):/*#__PURE__*/_jsx(AlertCircle,{className:\"w-3 h-3\"}),/*#__PURE__*/_jsxs(\"span\",{children:[Math.round(message.confidence*100),\"%\"]})]})]}),message.suggestions&&message.suggestions.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 space-y-1\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs opacity-70\",children:\"Quick replies:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-1\",children:message.suggestions.slice(0,3).map((suggestion,idx)=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleQuickReply(suggestion),className:\"text-xs px-2 py-1 bg-blue-50 text-blue-600 rounded-full hover:bg-blue-100 transition-colors\",children:suggestion},idx))})]})]})]})},message.id))}),/*#__PURE__*/_jsx(AnimatePresence,{children:isTyping&&/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:\"flex justify-start\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 bg-gradient-to-br from-green-500 to-teal-600 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(Bot,{className:\"w-4 h-4 text-white\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-100 px-4 py-3 rounded-2xl\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\"}),/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\",style:{animationDelay:'0.1s'}}),/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\",style:{animationDelay:'0.2s'}})]})})]})})}),/*#__PURE__*/_jsx(\"div\",{ref:messagesEndRef})]}),messages.length<=2&&/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:\"px-4 py-2\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 mb-3\",children:\"Quick questions:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-2\",children:quickReplies.map((reply,index)=>/*#__PURE__*/_jsxs(motion.button,{whileHover:{scale:1.05},whileTap:{scale:0.95},onClick:()=>sendMessage(reply.text),className:\"inline-flex items-center space-x-2 px-3 py-2 bg-white border border-gray-200 rounded-full text-sm text-gray-700 hover:bg-gray-50 hover:border-gray-300 transition-colors\",children:[/*#__PURE__*/_jsx(\"span\",{children:reply.icon}),/*#__PURE__*/_jsx(\"span\",{children:reply.text})]},index))})]}),/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:\"bg-white/80 backdrop-blur-md border-t border-gray-200/50 p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-end space-x-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 relative\",children:[/*#__PURE__*/_jsx(\"textarea\",{ref:inputRef,value:inputMessage,onChange:e=>setInputMessage(e.target.value),onKeyPress:handleKeyPress,placeholder:\"Type your health question in \".concat((_languages$find=languages.find(l=>l.code===currentLanguage))===null||_languages$find===void 0?void 0:_languages$find.name,\"...\"),className:\"w-full px-4 py-3 pr-12 bg-gray-50 border border-gray-200 rounded-2xl resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200\",rows:1,style:{minHeight:'48px',maxHeight:'120px'},disabled:isLoading}),/*#__PURE__*/_jsx(motion.button,{whileHover:{scale:1.1},whileTap:{scale:0.9},onClick:toggleVoiceInput,className:\"absolute right-3 top-1/2 transform -translate-y-1/2 p-2 rounded-full transition-colors \".concat(isListening?'bg-red-500 text-white':'text-gray-400 hover:text-gray-600 hover:bg-gray-100'),disabled:isLoading,children:isListening?/*#__PURE__*/_jsx(MicOff,{className:\"w-4 h-4\"}):/*#__PURE__*/_jsx(Mic,{className:\"w-4 h-4\"})})]}),/*#__PURE__*/_jsx(motion.button,{whileHover:{scale:1.05},whileTap:{scale:0.95},onClick:()=>sendMessage(),disabled:!inputMessage.trim()||isLoading,className:\"p-3 rounded-2xl transition-all duration-200 \".concat(inputMessage.trim()&&!isLoading?'bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-lg hover:shadow-xl':'bg-gray-200 text-gray-400 cursor-not-allowed'),children:isLoading?/*#__PURE__*/_jsx(Loader,{className:\"w-5 h-5 animate-spin\"}):/*#__PURE__*/_jsx(Send,{className:\"w-5 h-5\"})})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-2 text-center\",children:\"This is for informational purposes only. Always consult healthcare professionals for medical advice.\"})]})]})});};export default Chat;","map":{"version":3,"names":["React","useState","useEffect","useRef","motion","AnimatePresence","Send","Bot","User","Loader","Globe","Mic","MicOff","RefreshCw","Heart","AlertCircle","CheckCircle","toast","jsx","_jsx","jsxs","_jsxs","Chat","_languages$find","messages","setMessages","id","type","content","timestamp","Date","language","inputMessage","setInputMessage","isTyping","setIsTyping","isListening","setIsListening","currentLanguage","setCurrentLanguage","supportedLanguages","setSupportedLanguages","autoDetectLanguage","setAutoDetectLanguage","isLoading","setIsLoading","messagesEndRef","inputRef","quickReplies","text","icon","languages","code","name","flag","scrollToBottom","fetchSupportedLanguages","response","fetch","data","json","success","error","console","_messagesEndRef$curre","current","scrollIntoView","behavior","sendMessage","messageText","arguments","length","undefined","trim","userMessage","now","prev","currentMessage","method","headers","body","JSON","stringify","message","userId","sessionId","botMessage","confidence","category","suggestions","Error","errorMessage","isError","handleKeyPress","e","key","shiftKey","preventDefault","toggleVoiceInput","window","recognition","webkitSpeechRecognition","continuous","interimResults","lang","start","onresult","event","transcript","results","onerror","onend","stop","handleQuickReply","suggestion","detectLanguage","detectedLanguage","clearChat","formatTime","toLocaleTimeString","hour","minute","className","children","div","initial","opacity","y","animate","checked","onChange","target","value","disabled","concat","Object","keys","entries","map","_ref","button","whileHover","scale","whileTap","onClick","title","exit","transition","duration","Math","round","slice","idx","style","animationDelay","ref","reply","index","onKeyPress","placeholder","find","l","rows","minHeight","maxHeight"],"sources":["/Users/juneahmed/gramcare/client/src/pages/Chat.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { \n  Send, \n  Bot, \n  User, \n  Loader, \n  Globe, \n  Mic, \n  MicOff,\n  RefreshCw,\n  Heart,\n  AlertCircle,\n  CheckCircle\n} from 'lucide-react';\nimport toast from 'react-hot-toast';\n\nconst Chat = () => {\n  const [messages, setMessages] = useState([\n    {\n      id: 1,\n      type: 'bot',\n      content: 'Hello! I\\'m your GramCare health assistant. I can help you with health questions, provide disease information, and share prevention tips. How can I assist you today?',\n      timestamp: new Date(),\n      language: 'en'\n    }\n  ]);\n  const [inputMessage, setInputMessage] = useState('');\n  const [isTyping, setIsTyping] = useState(false);\n  const [isListening, setIsListening] = useState(false);\n  const [currentLanguage, setCurrentLanguage] = useState('en');\n  const [supportedLanguages, setSupportedLanguages] = useState({});\n  const [autoDetectLanguage, setAutoDetectLanguage] = useState(true);\n  const [isLoading, setIsLoading] = useState(false);\n  const messagesEndRef = useRef(null);\n  const inputRef = useRef(null);\n\n  const quickReplies = [\n    { text: 'Dengue symptoms', icon: 'ðŸ¦Ÿ' },\n    { text: 'Malaria prevention', icon: 'ðŸ›¡ï¸' },\n    { text: 'Child vaccination', icon: 'ðŸ’‰' },\n    { text: 'Diarrhea treatment', icon: 'ðŸ’Š' },\n    { text: 'Nearest health center', icon: 'ðŸ¥' },\n    { text: 'COVID-19 guidelines', icon: 'ðŸ˜·' }\n  ];\n\n  const languages = [\n    { code: 'en', name: 'English', flag: 'ðŸ‡ºðŸ‡¸' },\n    { code: 'hi', name: 'à¤¹à¤¿à¤‚à¤¦à¥€', flag: 'ðŸ‡®ðŸ‡³' },\n    { code: 'bn', name: 'à¦¬à¦¾à¦‚à¦²à¦¾', flag: 'ðŸ‡§ðŸ‡©' },\n    { code: 'te', name: 'à°¤à±†à°²à±à°—à±', flag: 'ðŸ‡®ðŸ‡³' }\n  ];\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  useEffect(() => {\n    // Fetch supported languages on component mount\n    fetchSupportedLanguages();\n  }, []);\n\n  const fetchSupportedLanguages = async () => {\n    try {\n      const response = await fetch('/api/chat/languages');\n      const data = await response.json();\n      if (data.success) {\n        setSupportedLanguages(data.languages);\n      }\n    } catch (error) {\n      console.error('Error fetching supported languages:', error);\n    }\n  };\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  };\n\n  const sendMessage = async (messageText = inputMessage) => {\n    if (!messageText.trim()) return;\n\n    const userMessage = {\n      id: Date.now(),\n      type: 'user',\n      content: messageText,\n      timestamp: new Date(),\n      language: currentLanguage\n    };\n\n    setMessages(prev => [...prev, userMessage]);\n    const currentMessage = messageText;\n    setInputMessage('');\n    setIsTyping(true);\n    setIsLoading(true);\n\n    try {\n      // Send message to backend\n      const response = await fetch('/api/chat/message', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          message: currentMessage,\n          language: autoDetectLanguage ? 'auto' : currentLanguage,\n          userId: 'demo-user',\n          sessionId: 'web-session-' + Date.now()\n        })\n      });\n\n      const data = await response.json();\n      \n      if (data.success) {\n        const botMessage = {\n          id: Date.now() + 1,\n          type: 'bot',\n          content: data.response || 'I apologize, but I\\'m having trouble processing your request right now. Please try again.',\n          timestamp: new Date(),\n          language: data.language || currentLanguage,\n          confidence: data.confidence,\n          category: data.category,\n          suggestions: data.suggestions || []\n        };\n\n        setMessages(prev => [...prev, botMessage]);\n        \n        // Update detected language if auto-detect is enabled\n        if (autoDetectLanguage && data.language && data.language !== currentLanguage) {\n          setCurrentLanguage(data.language);\n        }\n      } else {\n        throw new Error(data.error || 'Failed to get response');\n      }\n    } catch (error) {\n      console.error('Error sending message:', error);\n      const errorMessage = {\n        id: Date.now() + 1,\n        type: 'bot',\n        content: 'I\\'m sorry, I\\'m having trouble connecting right now. Please check your internet connection and try again.',\n        timestamp: new Date(),\n        language: currentLanguage,\n        isError: true\n      };\n\n      setMessages(prev => [...prev, errorMessage]);\n      toast.error('Connection error. Please try again.');\n    } finally {\n      setIsTyping(false);\n      setIsLoading(false);\n    }\n  };\n\n  const handleKeyPress = (e) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      sendMessage();\n    }\n  };\n\n  const toggleVoiceInput = () => {\n    if ('webkitSpeechRecognition' in window) {\n      const recognition = new window.webkitSpeechRecognition();\n      recognition.continuous = false;\n      recognition.interimResults = false;\n      recognition.lang = currentLanguage === 'hi' ? 'hi-IN' : 'en-US';\n\n      if (!isListening) {\n        setIsListening(true);\n        recognition.start();\n        toast.success('Listening... Speak now!');\n\n        recognition.onresult = (event) => {\n          const transcript = event.results[0][0].transcript;\n          setInputMessage(transcript);\n          setIsListening(false);\n        };\n\n        recognition.onerror = () => {\n          setIsListening(false);\n          toast.error('Voice recognition failed. Please try again.');\n        };\n\n        recognition.onend = () => {\n          setIsListening(false);\n        };\n      } else {\n        recognition.stop();\n        setIsListening(false);\n      }\n    } else {\n      toast.error('Voice recognition is not supported in your browser.');\n    }\n  };\n\n  const handleQuickReply = async (suggestion) => {\n    await sendMessage(suggestion);\n  };\n\n  const detectLanguage = async (text) => {\n    try {\n      const response = await fetch('/api/chat/detect-language', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ text })\n      });\n      \n      const data = await response.json();\n      if (data.success) {\n        return data.detectedLanguage;\n      }\n    } catch (error) {\n      console.error('Language detection error:', error);\n    }\n    return 'en'; // Default to English\n  };\n\n  const clearChat = () => {\n    setMessages([\n      {\n        id: 1,\n        type: 'bot',\n        content: 'Chat cleared! How can I help you today?',\n        timestamp: new Date(),\n        language: currentLanguage\n      }\n    ]);\n    toast.success('Chat cleared successfully!');\n  };\n\n  const formatTime = (timestamp) => {\n    return new Date(timestamp).toLocaleTimeString('en-US', {\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n\n  return (\n    <div className=\"min-h-screen pt-16 bg-gradient-to-br from-blue-50 via-white to-green-50\">\n      <div className=\"max-w-4xl mx-auto h-screen flex flex-col\">\n        {/* Header */}\n        <motion.div\n          initial={{ opacity: 0, y: -20 }}\n          animate={{ opacity: 1, y: 0 }}\n          className=\"bg-white/80 backdrop-blur-md border-b border-gray-200/50 p-4 flex items-center justify-between\"\n        >\n          <div className=\"flex items-center space-x-3\">\n            <div className=\"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center\">\n              <Heart className=\"w-6 h-6 text-white\" />\n            </div>\n            <div>\n              <h1 className=\"text-lg font-semibold text-gray-900\">GramCare Assistant</h1>\n              <p className=\"text-sm text-gray-500\">Always here to help with your health questions</p>\n            </div>\n          </div>\n\n          <div className=\"flex items-center space-x-2\">\n            {/* Language Selector */}\n            <div className=\"flex items-center space-x-2\">\n              <label className=\"flex items-center space-x-1\">\n                <input\n                  type=\"checkbox\"\n                  checked={autoDetectLanguage}\n                  onChange={(e) => setAutoDetectLanguage(e.target.checked)}\n                  className=\"rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\n                />\n                <span className=\"text-sm text-gray-600\">Auto-detect</span>\n              </label>\n              \n              <select\n                value={currentLanguage}\n                onChange={(e) => setCurrentLanguage(e.target.value)}\n                disabled={autoDetectLanguage}\n                className={`px-3 py-2 bg-gray-100 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 ${\n                  autoDetectLanguage ? 'opacity-50 cursor-not-allowed' : ''\n                }`}\n              >\n                {Object.keys(supportedLanguages).length > 0 ? \n                  Object.entries(supportedLanguages).map(([code, name]) => (\n                    <option key={code} value={code}>{name}</option>\n                  )) :\n                  languages.map(lang => (\n                    <option key={lang.code} value={lang.code}>\n                      {lang.flag} {lang.name}\n                    </option>\n                  ))\n                }\n              </select>\n            </div>\n\n            {/* Clear Chat Button */}\n            <motion.button\n              whileHover={{ scale: 1.05 }}\n              whileTap={{ scale: 0.95 }}\n              onClick={clearChat}\n              className=\"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors\"\n              title=\"Clear chat\"\n            >\n              <RefreshCw className=\"w-5 h-5\" />\n            </motion.button>\n          </div>\n        </motion.div>\n\n        {/* Messages Container */}\n        <div className=\"flex-1 overflow-y-auto p-4 space-y-4 custom-scrollbar\">\n          <AnimatePresence>\n            {messages.map((message) => (\n              <motion.div\n                key={message.id}\n                initial={{ opacity: 0, y: 20, scale: 0.95 }}\n                animate={{ opacity: 1, y: 0, scale: 1 }}\n                exit={{ opacity: 0, y: -20, scale: 0.95 }}\n                transition={{ duration: 0.3 }}\n                className={`flex ${message.type === 'user' ? 'justify-end' : 'justify-start'}`}\n              >\n                <div className={`flex items-start space-x-3 max-w-xs sm:max-w-md lg:max-w-lg ${message.type === 'user' ? 'flex-row-reverse space-x-reverse' : ''}`}>\n                  {/* Avatar */}\n                  <div className={`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${message.type === 'user' ? 'bg-gradient-to-br from-blue-500 to-purple-600' : 'bg-gradient-to-br from-green-500 to-teal-600'}`}>\n                    {message.type === 'user' ? (\n                      <User className=\"w-4 h-4 text-white\" />\n                    ) : (\n                      <Bot className=\"w-4 h-4 text-white\" />\n                    )}\n                  </div>\n\n                  {/* Message Bubble */}\n                  <div className={`relative px-4 py-3 rounded-2xl ${message.type === 'user' ? 'chat-bubble-user' : message.isError ? 'bg-red-100 border border-red-200 text-red-800' : 'chat-bubble-bot'}`}>\n                    <p className=\"text-sm leading-relaxed whitespace-pre-wrap\">\n                      {message.content}\n                    </p>\n                    \n                    {/* Message metadata */}\n                    <div className=\"flex items-center justify-between mt-2 text-xs opacity-70\">\n                      <span>{formatTime(message.timestamp)}</span>\n                      {message.confidence && (\n                        <div className=\"flex items-center space-x-1\">\n                          {message.confidence > 0.8 ? (\n                            <CheckCircle className=\"w-3 h-3\" />\n                          ) : (\n                            <AlertCircle className=\"w-3 h-3\" />\n                          )}\n                          <span>{Math.round(message.confidence * 100)}%</span>\n                        </div>\n                      )}\n                    </div>\n                    \n                    {/* Quick reply suggestions */}\n                    {message.suggestions && message.suggestions.length > 0 && (\n                      <div className=\"mt-3 space-y-1\">\n                        <p className=\"text-xs opacity-70\">Quick replies:</p>\n                        <div className=\"flex flex-wrap gap-1\">\n                          {message.suggestions.slice(0, 3).map((suggestion, idx) => (\n                            <button\n                              key={idx}\n                              onClick={() => handleQuickReply(suggestion)}\n                              className=\"text-xs px-2 py-1 bg-blue-50 text-blue-600 rounded-full hover:bg-blue-100 transition-colors\"\n                            >\n                              {suggestion}\n                            </button>\n                          ))}\n                        </div>\n                      </div>\n                    )}\n                  </div>\n                </div>\n              </motion.div>\n            ))}\n          </AnimatePresence>\n\n          {/* Typing Indicator */}\n          <AnimatePresence>\n            {isTyping && (\n              <motion.div\n                initial={{ opacity: 0, y: 20 }}\n                animate={{ opacity: 1, y: 0 }}\n                exit={{ opacity: 0, y: -20 }}\n                className=\"flex justify-start\"\n              >\n                <div className=\"flex items-start space-x-3\">\n                  <div className=\"w-8 h-8 bg-gradient-to-br from-green-500 to-teal-600 rounded-full flex items-center justify-center\">\n                    <Bot className=\"w-4 h-4 text-white\" />\n                  </div>\n                  <div className=\"bg-gray-100 px-4 py-3 rounded-2xl\">\n                    <div className=\"flex space-x-1\">\n                      <div className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\"></div>\n                      <div className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\" style={{ animationDelay: '0.1s' }}></div>\n                      <div className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\" style={{ animationDelay: '0.2s' }}></div>\n                    </div>\n                  </div>\n                </div>\n              </motion.div>\n            )}\n          </AnimatePresence>\n\n          <div ref={messagesEndRef} />\n        </div>\n\n        {/* Quick Replies */}\n        {messages.length <= 2 && (\n          <motion.div\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            className=\"px-4 py-2\"\n          >\n            <p className=\"text-sm text-gray-500 mb-3\">Quick questions:</p>\n            <div className=\"flex flex-wrap gap-2\">\n              {quickReplies.map((reply, index) => (\n                <motion.button\n                  key={index}\n                  whileHover={{ scale: 1.05 }}\n                  whileTap={{ scale: 0.95 }}\n                  onClick={() => sendMessage(reply.text)}\n                  className=\"inline-flex items-center space-x-2 px-3 py-2 bg-white border border-gray-200 rounded-full text-sm text-gray-700 hover:bg-gray-50 hover:border-gray-300 transition-colors\"\n                >\n                  <span>{reply.icon}</span>\n                  <span>{reply.text}</span>\n                </motion.button>\n              ))}\n            </div>\n          </motion.div>\n        )}\n\n        {/* Input Area */}\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          className=\"bg-white/80 backdrop-blur-md border-t border-gray-200/50 p-4\"\n        >\n          <div className=\"flex items-end space-x-3\">\n            <div className=\"flex-1 relative\">\n              <textarea\n                ref={inputRef}\n                value={inputMessage}\n                onChange={(e) => setInputMessage(e.target.value)}\n                onKeyPress={handleKeyPress}\n                placeholder={`Type your health question in ${languages.find(l => l.code === currentLanguage)?.name}...`}\n                className=\"w-full px-4 py-3 pr-12 bg-gray-50 border border-gray-200 rounded-2xl resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200\"\n                rows={1}\n                style={{ minHeight: '48px', maxHeight: '120px' }}\n                disabled={isLoading}\n              />\n              \n              {/* Voice Input Button */}\n              <motion.button\n                whileHover={{ scale: 1.1 }}\n                whileTap={{ scale: 0.9 }}\n                onClick={toggleVoiceInput}\n                className={`absolute right-3 top-1/2 transform -translate-y-1/2 p-2 rounded-full transition-colors ${\n                  isListening \n                    ? 'bg-red-500 text-white' \n                    : 'text-gray-400 hover:text-gray-600 hover:bg-gray-100'\n                }`}\n                disabled={isLoading}\n              >\n                {isListening ? (\n                  <MicOff className=\"w-4 h-4\" />\n                ) : (\n                  <Mic className=\"w-4 h-4\" />\n                )}\n              </motion.button>\n            </div>\n\n            {/* Send Button */}\n            <motion.button\n              whileHover={{ scale: 1.05 }}\n              whileTap={{ scale: 0.95 }}\n              onClick={() => sendMessage()}\n              disabled={!inputMessage.trim() || isLoading}\n              className={`p-3 rounded-2xl transition-all duration-200 ${\n                inputMessage.trim() && !isLoading\n                  ? 'bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-lg hover:shadow-xl'\n                  : 'bg-gray-200 text-gray-400 cursor-not-allowed'\n              }`}\n            >\n              {isLoading ? (\n                <Loader className=\"w-5 h-5 animate-spin\" />\n              ) : (\n                <Send className=\"w-5 h-5\" />\n              )}\n            </motion.button>\n          </div>\n\n          {/* Disclaimer */}\n          <p className=\"text-xs text-gray-500 mt-2 text-center\">\n            This is for informational purposes only. Always consult healthcare professionals for medical advice.\n          </p>\n        </motion.div>\n      </div>\n    </div>\n  );\n};\n\nexport default Chat;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}